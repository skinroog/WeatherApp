parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"AZzu":[function(require,module,exports) {
"use strict";async function e(e,i){const r=await fetch(`https://api.openweathermap.org/data/2.5/weather?lat=${e}&lon=${i}&units=metric&appid=1dc9df05c4bbc873836c0d64a425d21d&lang=ru`);if(!r.ok)throw new Error(r.status);return t(await r.json())}function t(e){return{temperature:e.main.temp,feelsLike:e.main.feels_like,description:e.weather[0].description,wind:e.wind.speed,humidity:e.main.humidity,pressure:e.main.pressure,clouds:e.clouds.all,icon:e.weather[0].icon}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.getWeather=e;
},{}],"dQOw":[function(require,module,exports) {
"use strict";async function e(e,a){!function(){const e=document.querySelector("[data-search-input]");e.value="",e.blur()}();const c=document.querySelector(".app__location"),u=document.querySelector(".weather-main__temp-value"),d=document.querySelector(".weather-main__desc"),i=document.querySelector(".weather-main__feels-like-value"),s=document.querySelector("[data-wind-value]"),l=document.querySelector("[data-humidity-value]"),m=document.querySelector("[data-pressure-value]"),p=document.querySelector("[data-clouds-value]");var y;let x;t(u,i),c.textContent=a,u.textContent=n(e.temperature),i.textContent=n(e.feelsLike),d.textContent=e.description,s.textContent=e.wind.toFixed(1)+" м/с",l.textContent=Math.round(e.humidity)+" %",m.textContent=(y=e.pressure,Math.round(.75006375541921*y)+" мм рт. ст."),p.textContent=Math.round(e.clouds)+" %",document.querySelector(".weather-main__icon").src=`icons/${e.icon}.svg`;try{x=await o(e.description)}catch(C){x="default-background.jpg"}await r(x)}function t(e,t){const o=document.querySelector(".weather-main__temp-unit");o.textContent="C",o.onclick=(()=>{"C"===o.textContent?(o.textContent="F",e.textContent=n(1.8*+e.textContent+32),t.textContent=n(1.8*+t.textContent+32)):(o.textContent="C",e.textContent=n((+e.textContent-32)/1.8),t.textContent=n((+t.textContent-32)/1.8))})}function n(e){return(e=Math.round(e))>0?`+${e}`:e}async function o(e){const t=e.replace(/\s/g,"+"),n=await fetch(`https://pixabay.com/api/?key=18227191-fcb06157a5540c6d2c9d55d91&q=${t}&lang=ru&image_type=photo&category=backgrounds+nature+places&per_page=3`);if(!n.ok)throw new Error("Image did not received");return(await n.json()).hits[0].largeImageURL}function r(e){return new Promise(t=>{const n=new Image;n.src=e,document.body.style.backgroundImage=`url(${e})`,n.onload=t})}function a(e){const t=document.querySelector("[data-search-form]"),n=document.querySelector("[data-search-input]"),o=document.querySelector("[data-location-button]"),r=document.createElement("span");t.append(r),r.textContent=e,r.className="warning-element",r.style.position="absolute",r.style.left="0",r.style.top=`${t.offsetHeight+5}px`;const a=()=>r.remove();n.addEventListener("input",a),t.addEventListener("submit",a),o.addEventListener("click",a)}function c(){document.querySelector("[data-preloader]").classList.toggle("preloader--show")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.displayWeather=e,exports.addWarning=a,exports.togglePreloader=c;
},{}],"XWlU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getUserLocation=t;var e=require("./display");function o(){return new Promise((e,o)=>{navigator.geolocation.getCurrentPosition(e,o)})}async function t(){let t;try{if("false"===localStorage.getItem("locationAllowed"))throw new Error("Geolocation does not allowed");t=await o(),localStorage.setItem("locationAllowed",!0)}catch(c){throw(c instanceof GeolocationPositionError&&1===c.code||"Geolocation does not allowed"===c.message)&&((0,e.addWarning)("Вы запретили определение геолокации. Найдите свой город выше! 👆🏼"),localStorage.setItem("locationAllowed",!1)),c}const a=await fetch(`https://geocode-maps.yandex.ru/1.x?geocode=${t.coords.longitude},${t.coords.latitude}&apikey=cd0bd47c-5f52-4228-b580-3cde6b7d8c6b&format=json&results=1`);if(!a.ok)throw new Error(a.status);const r=await a.json(),s=r.response.GeoObjectCollection.featureMember[0].GeoObject.metaDataProperty.GeocoderMetaData.AddressDetails.Country.AdministrativeArea.Locality.LocalityName,n=r.response.GeoObjectCollection.featureMember[0].GeoObject.metaDataProperty.GeocoderMetaData.AddressDetails.Country.CountryName;return{latitude:t.coords.latitude,longitude:t.coords.longitude,address:`${s}, ${n}`}}
},{"./display":"dQOw"}],"HU2o":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.initSearchListeners=a;var e=require("./weather"),t=require("./location"),o=require("./display");function a(){r(),n()}function r(){const t=document.querySelector("[data-search-input]"),a=document.querySelector("[data-search-form]");ymaps.ready(function(){new ymaps.SuggestView(t)}),a.addEventListener("submit",async a=>{a.preventDefault(),(0,o.togglePreloader)();const r=t.value;if(r){try{const t="cd0bd47c-5f52-4228-b580-3cde6b7d8c6b",a=await fetch(`https://geocode-maps.yandex.ru/1.x?geocode=${r}&apikey=${t}&format=json&results=1`);if(!a.ok)throw new Error(a.status);const s=await a.json();if("0"===s.response.GeoObjectCollection.metaDataProperty.GeocoderResponseMetaData.found)return(0,o.addWarning)("По вашему запросу город не найден 😞. Попробуйте снова!"),void(0,o.togglePreloader)();const c=s.response.GeoObjectCollection.featureMember[0].GeoObject.Point.pos;let i;for(let e of s.response.GeoObjectCollection.featureMember[0].GeoObject.metaDataProperty.GeocoderMetaData.Address.Components)"locality"===e.kind&&(i=e.name);i||(i=s.response.GeoObjectCollection.featureMember[0].GeoObject.name);const l=s.response.GeoObjectCollection.featureMember[0].GeoObject.metaDataProperty.GeocoderMetaData.AddressDetails.Country.CountryName;if(i===l)return(0,o.addWarning)("Введите корректное название города 😕"),void(0,o.togglePreloader)();const d=`${i}, ${l}`,u=await(0,e.getWeather)(...c.split(" ").reverse().map(e=>+e));await(0,o.displayWeather)(u,d)}catch(n){console.log(n)}(0,o.togglePreloader)()}else(0,o.togglePreloader)()})}function n(){document.querySelector("[data-location-button]").addEventListener("click",async()=>{(0,o.togglePreloader)();try{const r=await(0,t.getUserLocation)(),n=await(0,e.getWeather)(r.latitude,r.longitude);await(0,o.displayWeather)(n,r.address)}catch(a){console.log(a)}(0,o.togglePreloader)()})}
},{"./weather":"AZzu","./location":"XWlU","./display":"dQOw"}],"L4bL":[function(require,module,exports) {
"use strict";var e=require("./weather"),t=require("./location"),a=require("./search"),r=require("./display");async function o(){(0,r.togglePreloader)();try{const o=await(0,t.getUserLocation)(),n=await(0,e.getWeather)(o.latitude,o.longitude);await(0,r.displayWeather)(n,o.address)}catch(a){console.log(a)}(0,r.togglePreloader)()}function n(){const e=document.querySelector(".app__date"),t=new Date,a=t.getDate()>=10?t.getDate():`0${t.getDate()}`,r=t.getMonth()>=10?t.getMonth()+1:`0${t.getMonth()+1}`,o=t.getFullYear();e.innerHTML=`${a}.${r}.${o}`}window.addEventListener("load",async()=>{window.onerror=r.togglePreloader,window.addEventListener("beforeunload",()=>localStorage.clear());try{await o(),n(),(0,a.initSearchListeners)()}catch(e){console.log(e)}});
},{"./weather":"AZzu","./location":"XWlU","./search":"HU2o","./display":"dQOw"}]},{},["L4bL"], null)
//# sourceMappingURL=script.eb91c85f.js.map